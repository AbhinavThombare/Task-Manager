

<div id="frame">
    <div id="btndiv" *ngIf="btndiv">
        <button id="adduser" class="btn btn-info" (click)="adduser()">Add User/SubAdmin</button>
    </div>
    <div id="formlayout" *ngIf="formopen">
        <div id="formhead">
            <p>Create User</p>
        </div>
        <div id="formcard">
            <form [formGroup]="createuserdata" novalidate>
                <div>
                    <label>Name*</label>
                    <input type="text" name="name" id="name" #name class="form-control" formControlName="name"
                        placeholder="Enter Name" [(ngModel)]="iname">
                </div>
                <div class="error">
                    <ng-container *ngFor="let msg of message_error.name">
                        <div class="error"
                            *ngIf="createuserdata.get('name').hasError(msg.type) && (createuserdata.get('name').touched)">
                            <p id="msg">{{msg.message}}</p>
                        </div>
                    </ng-container>
                </div>

                <div class="mt-3">
                    <label>Email*</label>
                    <input type="email" name="email" id="email" #email class="form-control" formControlName="email"
                        placeholder="Enter Email" [(ngModel)]="iemail">
                </div>
                <div class="error">
                    <ng-container *ngFor="let msg of message_error.email">
                        <div class="error"
                            *ngIf="createuserdata.get('email').hasError(msg.type) && (createuserdata.get('email').dirty || createuserdata.get('email').touched)">
                            <p id="msg">{{msg.message}}</p>
                        </div>
                    </ng-container>
                </div>

                <div class="mt-3">
                    <label>Password</label>
                    <input type="password" name="password" id="password" #password class="form-control"
                        formControlName="password" placeholder="Enter Password" [(ngModel)]="ipassword">
                </div>

                <div class="error">
                    <ng-container *ngFor="let msg of message_error.password">
                        <div class="error"
                            *ngIf="createuserdata.get('password').hasError(msg.type) && (createuserdata.get('password').dirty || createuserdata.get('password').touched)">
                            <p id="msg">{{msg.message}}</p>
                        </div>

                    </ng-container>
                </div>

                <div class="mt-3">
                    <label>Role</label>
                    <select name="role" id="role" #role class="form-select" aria-label="Default select example">
                        <option value="user">User</option>
                        <option value="subadmin">Sub-Admin</option>
                    </select>
                </div>

                <!-- <div class="mt-3">
                    <label>Role</label>
                    <input type="text" name="role" id="role" #password class="form-control"
                        value="User" disabled>
                </div> -->

                <div id="submitbtn">
                    <button type="submit" class="btn btn-success"
                        (click)="addUser(name.value,email.value,password.value,role.value)">Add</button>
                    <button id="cancelbtn" type="submit" class="btn btn-danger" (click)="cancel1()">Cancel</button>
                </div>
            </form>
        </div>
       
    </div>
    <hr/>

    <div id="updateformlayout" *ngIf="updateopen">
        <div id="updateformhead">
            <p>Update User</p>
        </div>
        <div id="updateformcard">
            <form [formGroup]="createuserdata" novalidate>
                <div>
                    <label>Name*</label>
                    <input type="text" name="name" id="name" #name class="form-control" formControlName="name"
                        placeholder="Enter Name" [(ngModel)]="uname">
                </div>
                <div class="error">
                    <ng-container *ngFor="let msg of message_error.name">
                        <div class="error"
                            *ngIf="createuserdata.get('name').hasError(msg.type) && (createuserdata.get('name').touched)">
                            <p id="msg">{{msg.message}}</p>
                        </div>
                    </ng-container>
                </div>

                <div class="mt-3">
                    <label>Email*</label>
                    <input type="email" name="email" id="email" #email class="form-control" formControlName="email"
                        placeholder="Enter Email" [(ngModel)]="uemail">
                </div>
                <div class="error">
                    <ng-container *ngFor="let msg of message_error.email">
                        <div class="error"
                            *ngIf="createuserdata.get('email').hasError(msg.type) && (createuserdata.get('email').dirty || createuserdata.get('email').touched)">
                            <p id="msg">{{msg.message}}</p>
                        </div>
                    </ng-container>
                </div>

                <div class="mt-3">
                    <label>Password</label>
                    <input type="password" name="password" id="password" #password class="form-control"
                        formControlName="password" placeholder="Enter Password" [(ngModel)]="upassword">
                </div>

                <div class="error">
                    <ng-container *ngFor="let msg of message_error.password">
                        <div class="error"
                            *ngIf="createuserdata.get('password').hasError(msg.type) && (createuserdata.get('password').dirty || createuserdata.get('password').touched)">
                            <p id="msg">{{msg.message}}</p>
                        </div>

                    </ng-container>
                </div>

                <div class="mt-3">
                    <label>Role</label>
                    <select name="role" id="role" #role class="form-select"  formControlName="role" aria-label="Default select example" [(ngModel)]="urole" >
                        <option value="user">User</option>
                        <option value="subadmin">Sub-Admin</option>
                    </select>
                </div>

                <div id="submitbtn">
                    <button type="submit" class="btn btn-success"
                        (click)="updateUser(name.value,email.value,password.value,role.value)">Update</button>
                    <button id="cancelbtn" type="submit" class="btn btn-danger" (click)="cancel2()">Cancel</button>
                </div>
            </form>
        </div>
    </div>
    
</div>

<div id="frame2">

    <div id="tablelayout1">
        <div id="tablekhead1">
            <p>Users Details</p>
        </div>
        <div id="tablecard1">
            <table class="table">
                <thead class="thead-light">
                    <tr>
                        <th>Sr</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Password</th>
                        <th>Role</th>
                        <th>User Action</th>
                    </tr>
                </thead>
                <tbody class="tbody-light">
                    <tr *ngFor="let item of getUserData; let i = index">
                        <td>{{i+1}}</td>
                        <td>{{item.name}}</td>
                        <td>{{item.email}}</td>
                        <td>{{item.password}}</td>
                        <td>{{item.role | titlecase}}</td>
                        <td>
                            <button id="editbtn" type="button" class="btn btn-primary"
                                (click)="editUser(i)">Edit</button>
                            <button id="deletebtn" type="button" class="btn btn-danger"
                                (click)="delUser(i,item.role)">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="tablelayout2">
        <div id="tablekhead2">
            <p>Sub-Admin Details</p>
        </div>
        <div id="tablecard2">
            <table class="table">
                <thead class="thead-light">
                    <tr>
                        <th>Sr</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Password</th>
                        <th>Role</th>
                        <th>SubAdmin Action</th>
                    </tr>
                </thead>
                <tbody  class="tbody-light">
                    <tr *ngFor="let item of getSubAdminData; let i = index">
                        <td>{{i+1}}</td>
                        <td>{{item.name}}</td>
                        <td>{{item.email}}</td>
                        <td>{{item.password}}</td>
                        <td>{{item.role | titlecase }}</td>
                        <td>
                            <button id="editbtn" type="button" class="btn btn-primary"
                                (click)="editsub(i)">Edit</button>
                            <button id="deletebtn" type="button" class="btn btn-danger"
                                (click)="delUser(i,item.role)">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>